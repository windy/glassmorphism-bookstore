<div class="min-h-screen bg-base-200">
  <div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto">
      <!-- Page Title -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-primary">Change Password</h1>
        <p class="text-base-content/70 mt-2">Update your password for better security</p>
      </div>

      <!-- Change Password Form -->
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
          <%= form_with(model: @user, url: update_password_profile_path, local: true, class: "space-y-6") do |form| %>
            <% if @user.errors.any? %>
              <div class="alert alert-error">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 shrink-0">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9-.75a9 9 0 0118 0 9 9 0 01-18 0z" />
                </svg>
                <div>
                  <h3 class="font-bold">Please fix the following errors:</h3>
                  <ul class="mt-2">
                    <% @user.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            <% end %>

            <div class="form-control">
              <%= label_tag :current_password, "Current Password", class: "label" %>
              <%= password_field_tag :current_password, "", required: true, autocomplete: "current-password", 
                      class: "input input-bordered w-full" %>
              <div class="label">
                <span class="label-text-alt text-info">Please enter your current password to confirm identity</span>
              </div>
            </div>

            <div class="divider"></div>

            <div class="form-control">
              <%= form.label :password, "New Password", class: "label" %>
              <%= form.password_field :password, required: true, autocomplete: "new-password", 
                      class: "input input-bordered w-full #{'input-error' if @user.errors[:password].any?}" %>
              <% if @user.errors[:password].any? %>
                <div class="label">
                  <span class="label-text-alt text-error"><%= @user.errors[:password].first %></span>
                </div>
              <% else %>
                <div class="label">
                  <span class="label-text-alt text-info">At least <%= User::MIN_PASSWORD %> characters</span>
                </div>
              <% end %>
            </div>

            <div class="form-control">
              <%= form.label :password_confirmation, "Confirm New Password", class: "label" %>
              <%= form.password_field :password_confirmation, required: true, autocomplete: "new-password", 
                      class: "input input-bordered w-full #{'input-error' if @user.errors[:password_confirmation].any?}" %>
              <% if @user.errors[:password_confirmation].any? %>
                <div class="label">
                  <span class="label-text-alt text-error"><%= @user.errors[:password_confirmation].first %></span>
                </div>
              <% else %>
                <div class="label">
                  <span class="label-text-alt text-info">Please re-enter your new password</span>
                </div>
              <% end %>
            </div>

            <div class="alert alert-warning">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 shrink-0">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9-.75a9 9 0 0118 0 9 9 0 01-18 0z" />
              </svg>
              <span>Changing your password will log out all other devices</span>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 pt-6">
              <%= form.submit "Update Password", class: "btn btn-primary" %>
              <%= link_to "Cancel", profile_path, class: "btn btn-ghost" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
